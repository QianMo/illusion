<!DOCTYPE html><html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>ILLUSION</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="yqbh" id="illusion">ILLUSION</h1><p data-anchor-id="o9ph"><strong>illusion</strong>是一个使用<a href="https://developers.google.com/protocol-buffers/" target="_blank">Protobuf</a>（Google  Protocol Buffers 2.0）文件作为配置描述，然后读取EXCEL文件里面相关的配置，然后将配置信息生产配置数据文件的工具。 <br>
<strong>illusion</strong>主要用于游戏配置管理等。程序开发可以快速的在PB文件里面定义配置结构信息，以及配置结构和EXCEL表直接的关系（ 生成EXCEL配置模版），策划可以方便的直接使用EXCEL进行数据配置。 <br>
希望通过这个工具提高游戏开发团队的开发效率。</p><div class="md-section-divider"></div><h2 data-anchor-id="in61" id="工具简介">工具简介</h2><p data-anchor-id="io64"><strong>illusion</strong>的图形化工具<strong>vision</strong>采用典型的左树右图UI界面。编译运行bin目录下的vision-release.exe程序，打开图形化工具。左边是配置表集合的导航树。右边是配置文件打开预览区，相应目录的PB(.proto)文件,EXCEL(.xls,.xlsx)文件都可以在这个区域形成预览。方便您迅速的了解相关配置信息。工具界面如下图： <br>
<img src="ILLUSION_files/f0486520c653ec7e.png" alt=""></p><p data-anchor-id="h9sd">使用工具初始化有2种方式， <br>
1. 一种是分别配置不同的子目录，<strong>illusion</strong>有4种数据，Protobuf .proto文件放置的目录；EXCEL .xls,.xlsx文件放置的目录；Protobuf import 文件放置的目录（<strong>illusion</strong>使用，所以也有自己的import目录），熟悉Protobuf的同学应该知道用途，以及生产文件.bin文件放置的目录。配置的时候选择Toolbar工具条上的第二个按钮。打开界面如下。 <br>
<img src="ILLUSION_files/0a907b1d32e16eb5.png" alt="" title=""> <br>
2. 一种是ALL IN ONE的模式，要求所有的配置目录放到一个子目录下，只配置打开一个目录。这种情况要求这个目录下分别有4个子目录放置不同的数据，分别是/import，/proto,/outer,/excel目录，（就是上面分别配置4种目录）。配置的时候选择Toolbar工具条上的第二个按钮。 <br>
<img src="ILLUSION_files/1addce2493ee43ed.png" alt="" title=""></p><p data-anchor-id="eor7">配置好目录后，<strong>illusion</strong>会分析proto文件目录，得到对应信息，同时检查相应的EXCEL文件和最后生成的配置文件是否存在，那个更新。然后会根据这些信息生产配置导航树。然后就可以在导航树上选择需要导出的配置表了。导航树默认的SHEET导航是用EXCEL的SHEET表名称作为树的根节点的。 <br>
只有相应有新的EXCEL配置的表格，程序会自动勾选。</p><div class="md-section-divider"></div><h2 data-anchor-id="4zmg" id="使用流程说明">使用流程说明</h2><div class="md-section-divider"></div><h3 data-anchor-id="ghp4" id="1程序开发定义pb文件">1.程序开发定义PB文件</h3><p data-anchor-id="au0j">使用<strong>illusion</strong>进行配置，你需要先定义一个proto文件，其使用<a href="https://developers.google.com/protocol-buffers/docs/proto#options" target="_blank">google protobuf Options</a> 的扩展功能，来描述你的配置结构和EXCEL表格（Sheet）之间的对应关系。所有的PB描述文件都需要包含<strong>illusion.proto</strong>文件，这个文件对相应的字段域，Message，枚举，做了一些扩展选项。这些选项会辅助我们建立我们自己的PB描述和EXCEL配置表格之间的关系。<strong>illusion.proto</strong>文件很简单，如下：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="s6kp" style=""><ol class="linenums"><li class="L0"><code><span class="com">//illusion.proto会引入google/protobuf/descriptor.proto文件</span></code></li><li class="L1"><code><span class="kwd">import</span><span class="pln"> </span><span class="str">"google/protobuf/descriptor.proto"</span><span class="pun">;</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="kwd">package</span><span class="pln"> illusion</span><span class="pun">;</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="com">//MessageOptions的扩展，</span></code></li><li class="L6"><code><span class="pln">extend google</span><span class="pun">.</span><span class="pln">protobuf</span><span class="pun">.</span><span class="typ">MessageOptions</span><span class="pln"> </span></code></li><li class="L7"><code><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">    </span><span class="com">//这个message对应的list message名称</span></code></li><li class="L9"><code><span class="pln">    optional </span><span class="kwd">bool</span><span class="pln">  cfg_message </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50001</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">default</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">];</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    </span><span class="com">//配置注释，中文名称</span></code></li><li class="L2"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> cfg_comment </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50002</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    </span><span class="com">//读取的EXCEL配置文件名称</span></code></li><li class="L5"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> excel_file </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50003</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="com">//读取的表格SHEET名称</span></code></li><li class="L7"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> excel_sheet </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50004</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="com">//输出的proto配置文件名称</span></code></li><li class="L9"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> outer_file </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50005</span><span class="pun">;</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="pln">    </span><span class="com">//字段名称写在第几行，导成EXCEL时实用</span></code></li><li class="L2"><code><span class="pln">    optional int32  fieldsname_line </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50006</span><span class="pun">[</span><span class="kwd">default</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span></code></li><li class="L3"><code><span class="pln">    </span><span class="com">//字段的FULLNAME</span></code></li><li class="L4"><code><span class="pln">    optional int32  fullname_line </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50007</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">default</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    </span><span class="com">//读取的行</span></code></li><li class="L6"><code><span class="pln">    optional int32  read_line </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50008</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">default</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">];</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="com">//对应字段域的扩展选项</span></code></li><li class="L1"><code><span class="pln">extend google</span><span class="pun">.</span><span class="pln">protobuf</span><span class="pun">.</span><span class="typ">FieldOptions</span><span class="pln"> </span></code></li><li class="L2"><code><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">    </span><span class="com">//这个message对应的list message名称</span></code></li><li class="L4"><code><span class="pln">    optional </span><span class="kwd">bool</span><span class="pln">  cfg_field </span><span class="pun">=</span><span class="pln"> </span><span class="lit">51001</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">default</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    </span><span class="com">//域选项的名字，</span></code></li><li class="L6"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> fields_name </span><span class="pun">=</span><span class="pln"> </span><span class="lit">51002</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">    </span><span class="com">//域选项，如果是一个repeat的字段，其长度</span></code></li><li class="L8"><code><span class="pln">    optional int32 repeat_size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">51003</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pun">}</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="com">//对应枚举的扩展选项，可以给枚举起中文名称，在EXCEL中使用</span></code></li><li class="L2"><code><span class="pln">extend google</span><span class="pun">.</span><span class="pln">protobuf</span><span class="pun">.</span><span class="typ">EnumValueOptions</span><span class="pln"> </span></code></li><li class="L3"><code><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">    </span><span class="com">//枚举值的选项</span></code></li><li class="L5"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> enum_name </span><span class="pun">=</span><span class="pln"> </span><span class="lit">50004</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="zkp9">然后我们定义我们自己的PB文件，我们用example的002的例子讲解一下。如下：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="89oq" style=""><ol class="linenums"><li class="L0"><code><span class="com">//option optimize_for = LITE_RUNTIME;</span></code></li><li class="L1"><code><span class="com">//必须引入illusion.proto文件，这样我们才能实用这些选项扩展</span></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> </span><span class="str">"illusion.proto"</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="com">//定义的枚举结构</span></code></li><li class="L5"><code><span class="kwd">enum</span><span class="pln"> ENUM_COUNTRY</span></code></li><li class="L6"><code><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">    AUSTRALIA </span><span class="pun">=</span><span class="pln">          </span><span class="lit">61</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Australia</span></code></li><li class="L8"><code><span class="pln">    CHILE </span><span class="pun">=</span><span class="pln">              </span><span class="lit">56</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Chile</span></code></li><li class="L9"><code><span class="pln">    EGYPT </span><span class="pun">=</span><span class="pln">              </span><span class="lit">20</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Egypt</span></code></li><li class="L0"><code><span class="pln">    FINLAND </span><span class="pun">=</span><span class="pln">            </span><span class="lit">358</span><span class="pun">;</span><span class="pln">        </span><span class="com">// Finland</span></code></li><li class="L1"><code><span class="pln">    FRANCE </span><span class="pun">=</span><span class="pln">             </span><span class="lit">33</span><span class="pun">;</span><span class="pln">         </span><span class="com">// France</span></code></li><li class="L2"><code><span class="pln">    GERMANY </span><span class="pun">=</span><span class="pln">            </span><span class="lit">49</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Germany</span></code></li><li class="L3"><code><span class="pln">    HONG_KONG </span><span class="pun">=</span><span class="pln">          </span><span class="lit">852</span><span class="pun">;</span><span class="pln">        </span><span class="com">// Hong Kong S.A.R., P.R.C.</span></code></li><li class="L4"><code><span class="pln">    ICELAND </span><span class="pun">=</span><span class="pln">            </span><span class="lit">354</span><span class="pun">;</span><span class="pln">        </span><span class="com">// Iceland</span></code></li><li class="L5"><code><span class="pln">    INDIA </span><span class="pun">=</span><span class="pln">              </span><span class="lit">91</span><span class="pun">;</span><span class="pln">         </span><span class="com">// India</span></code></li><li class="L6"><code><span class="pln">    IRAN </span><span class="pun">=</span><span class="pln">               </span><span class="lit">981</span><span class="pun">;</span><span class="pln">        </span><span class="com">// Iran</span></code></li><li class="L7"><code><span class="pln">    IRAQ </span><span class="pun">=</span><span class="pln">               </span><span class="lit">964</span><span class="pun">;</span><span class="pln">        </span><span class="com">// Iraq</span></code></li><li class="L8"><code><span class="pln">    IRELAND </span><span class="pun">=</span><span class="pln">            </span><span class="lit">353</span><span class="pun">;</span><span class="pln">        </span><span class="com">// Ireland</span></code></li><li class="L9"><code><span class="pln">    ITALY </span><span class="pun">=</span><span class="pln">              </span><span class="lit">39</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Italy</span></code></li><li class="L0"><code><span class="pln">    JAPAN </span><span class="pun">=</span><span class="pln">              </span><span class="lit">81</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Japan</span></code></li><li class="L1"><code><span class="pln">    MALAYSIA </span><span class="pun">=</span><span class="pln">           </span><span class="lit">60</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Malaysia</span></code></li><li class="L2"><code><span class="pln">    NORWAY  </span><span class="pun">=</span><span class="pln">            </span><span class="lit">47</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Norway</span></code></li><li class="L3"><code><span class="pln">    PRCHINA </span><span class="pun">=</span><span class="pln">            </span><span class="lit">86</span><span class="pun">;</span><span class="pln">         </span><span class="com">// People's Republic of China</span></code></li><li class="L4"><code><span class="pln">    POLAND </span><span class="pun">=</span><span class="pln">             </span><span class="lit">48</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Poland</span></code></li><li class="L5"><code><span class="pln">    RUSSIA </span><span class="pun">=</span><span class="pln">             </span><span class="lit">7</span><span class="pun">;</span><span class="pln">          </span><span class="com">// Russia</span></code></li><li class="L6"><code><span class="pln">    SOUTH_KOREA </span><span class="pun">=</span><span class="pln">        </span><span class="lit">82</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Korea</span></code></li><li class="L7"><code><span class="pln">    SPAIN </span><span class="pun">=</span><span class="pln">              </span><span class="lit">34</span><span class="pun">;</span><span class="pln">          </span><span class="com">// Spain</span></code></li><li class="L8"><code><span class="pln">    TAIWAN </span><span class="pun">=</span><span class="pln">             </span><span class="lit">886</span><span class="pun">;</span><span class="pln">         </span><span class="com">// Taiwan</span></code></li><li class="L9"><code><span class="pln">    UNITED_STATES </span><span class="pun">=</span><span class="pln">      </span><span class="lit">1</span><span class="pun">;</span><span class="pln">           </span><span class="com">// United States</span></code></li><li class="L0"><code><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="com">//子结构A，illusion.fields_name对应EXCEL Sheet表中的字段名称</span></code></li><li class="L3"><code><span class="pln">message SUB_STRUCT_A</span></code></li><li class="L4"><code><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">    optional </span><span class="kwd">double</span><span class="pln"> sub_a_1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置A1"</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    optional </span><span class="kwd">double</span><span class="pln"> sub_a_2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置A2"</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">    optional </span><span class="kwd">string</span><span class="pln"> sub_a_3 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置A3"</span><span class="pun">];</span></code></li><li class="L8"><code><span class="pln">    optional bytes sub_a_4 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置A4"</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pun">}</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="com">//子结构B，</span></code></li><li class="L2"><code><span class="pln">message SUB_STRUCT_B</span></code></li><li class="L3"><code><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">    optional int32 sub_b_1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置B1"</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    optional int64 sub_b_2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置B2"</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    optional uint32 sub_b_3 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置B3"</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">    optional int64 sub_b_4 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置B4"</span><span class="pun">];</span></code></li><li class="L8"><code><span class="pln">    </span><span class="com">//注意这是一个false，这个字段不作为配置实用</span></code></li><li class="L9"><code><span class="pln">    optional int64 sub_b_5 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">false</span><span class="pun">];</span></code></li><li class="L0"><code><span class="pun">}</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="com">//配置结构的一行对应的结构的描述，</span></code></li><li class="L3"><code><span class="pln">message GAME_CFG_STRUCT_2</span></code></li><li class="L4"><code><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">    </span><span class="com">//枚举定义，其中illusion.enum_name定义对应的中文或者EXCEL表格中操作的别名，</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">enum</span><span class="pln"> NESTED_ENUM </span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">        MON </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期一"</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">        TUE </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期二"</span><span class="pun">];</span><span class="pln">  </span></code></li><li class="L0"><code><span class="pln">        WED </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期三"</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pln">        THU </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期四"</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pln">        FRI </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期五"</span><span class="pun">];</span></code></li><li class="L3"><code><span class="pln">        SAT </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期六"</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pln">        SUN </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pln">    </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">enum_name</span><span class="pun">)=</span><span class="str">"星期日"</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln">    message NESTED_STRUCT_C</span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">        optional sint32  nested_c_1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">      </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置C1"</span><span class="pun">];</span></code></li><li class="L0"><code><span class="pln">        optional sint64  nested_c_2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">      </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置C2"</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pln">        optional fixed32  nested_c_3 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">     </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置C3"</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pln">        optional fixed64  nested_c_4 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">     </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置C4"</span><span class="pun">];</span></code></li><li class="L3"><code><span class="pln">        optional NESTED_ENUM nested_c_5 </span><span class="pun">=</span><span class="lit">5</span><span class="pln">   </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置C5"</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span><span class="pln">                                        </span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">    message NESTED_STRUCT_D                  </span></code></li><li class="L7"><code><span class="pln">    </span><span class="pun">{</span><span class="pln">                                        </span></code></li><li class="L8"><code><span class="pln">        optional sfixed32  nested_d_1 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">     </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置D1"</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">        optional sfixed64  nested_d_2 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">     </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置D2"</span><span class="pun">];</span></code></li><li class="L0"><code><span class="pln">        optional </span><span class="kwd">string</span><span class="pln">  nested_d_3 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">       </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置D3"</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pln">        optional bytes  nested_d_4 </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">        </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置D4"</span><span class="pun">];</span></code></li><li class="L2"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">    optional int32 s2_a </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">                   </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-1"</span><span class="pun">];</span></code></li><li class="L5"><code><span class="pln">    optional int32 s2_b </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pln">                   </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-2"</span><span class="pun">];</span></code></li><li class="L6"><code><span class="pln">    optional uint32 s2_c </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pln">                  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-3"</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">    repeated uint64 s2_d </span><span class="pun">=</span><span class="pln"> </span><span class="lit">4</span><span class="pln">                  </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-4"</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">repeat_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="lit">2</span><span class="pun">];</span></code></li><li class="L8"><code><span class="pln">    optional SUB_STRUCT_A  s2_e </span><span class="pun">=</span><span class="pln"> </span><span class="lit">5</span><span class="pln">           </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-5"</span><span class="pun">];</span></code></li><li class="L9"><code><span class="pln">    repeated SUB_STRUCT_B  s2_f </span><span class="pun">=</span><span class="pln"> </span><span class="lit">6</span><span class="pln">           </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">repeat_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="lit">2</span><span class="pun">];</span></code></li><li class="L0"><code><span class="pln">    optional NESTED_STRUCT_C s2_g </span><span class="pun">=</span><span class="pln"> </span><span class="lit">7</span><span class="pln">         </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">];</span></code></li><li class="L1"><code><span class="pln">    repeated NESTED_STRUCT_D s2_h </span><span class="pun">=</span><span class="pln"> </span><span class="lit">8</span><span class="pln">         </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">repeat_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="lit">4</span><span class="pun">];;</span><span class="pln"> </span></code></li><li class="L2"><code><span class="pln">    optional NESTED_ENUM s2_i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">9</span><span class="pln">             </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-9"</span><span class="pun">];</span></code></li><li class="L3"><code><span class="pln">    required ENUM_COUNTRY s2_j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">10</span><span class="pln">           </span><span class="pun">[(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_field</span><span class="pun">)=</span><span class="kwd">true</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fields_name</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="str">"配置S2-10"</span><span class="pun">,</span><span class="pln">  </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">repeat_size</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="lit">1</span><span class="pun">];</span></code></li><li class="L4"><code><span class="pun">}</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="com">//配置对应EXCEL Sheet的描述，他就是一个repeated GAME_CFG_STRUCT_2的数组，最后生产的配置结构也就是这个结构</span></code></li><li class="L7"><code><span class="pln">message LIST_OF_GAME_CFG_STRUCT_2</span></code></li><li class="L8"><code><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">    </span><span class="com">//message的选项信息</span></code></li><li class="L0"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_message</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">cfg_comment</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"游戏配置测试结构2"</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">excel_file</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"game_config_02.xlsx"</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">excel_sheet</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"GAME_CFG_STRUCT_2"</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">outer_file</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="str">"GAME_CFG_STRUCT_2.bin"</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fieldsname_line</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">fullname_line</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">2</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">    option </span><span class="pun">(</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">read_line</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="com">//这个字段的名字必须是 list_data，注意，再注意</span></code></li><li class="L9"><code><span class="pln">    repeated GAME_CFG_STRUCT_2 list_data </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="q130">proto文件里面可以定义N个表结构，每个表结构都是一个包含repeated 行结构 成员字段名称为 <strong>list_data</strong> 的结构。注意其中的字段名称必须是<strong>list_data</strong>,不能是其他名称。而这个结构里面有若干 message 扩展选项信息，包括<strong>illusion.cfg_message</strong> 决定这个结构是否是配置的Message信息，<strong>illusion.cfg_comment</strong>是这个结构的备注名称。<strong>illusion.excel_file</strong>定义对应的EXCEL文件名称，  <strong>illusion.excel_sheet</strong>定义对应的EXCEL Sheet名称。<strong>illusion.outer_file</strong>对应相应的输出文件名称。<strong>illusion.fieldsname_line</strong>定义相应的字段名称在Sheet表中间的第几行（你可以自由的控制格式），注意<strong>illusion</strong>是根据字段名称去查询对应的字段信息的，所以其实EXCEL Sheet表格中，你可以自己控制跳过若干列用于自己的配置数据管理。<strong>illusion.fullname_line</strong>是字段的full name 对应的行，这个主要是为了方便程序员对应查询相应的问题。非必须字段。<strong>illusion.read_line</strong>标识从几行开始进行读取操作。 <br>
上面例子里面<strong>LIST_OF_GAME_CFG_STRUCT_2</strong>对应相应的Sheet信息。其repeated结构是<strong>GAME_CFG_STRUCT_2</strong>而，<strong>GAME_CFG_STRUCT_2</strong>里面包含了<strong>ENUM_COUNTRY</strong>，<strong>SUB_STRUCT_A</strong>，<strong>SUB_STRUCT_B</strong>，以及内嵌的结构枚举，<strong>NESTED_STRUCT_C</strong>，<strong>NESTED_STRUCT_D</strong>等。这些结构的fields字段有扩展选项，其中<strong>illusion.cfg_field</strong>扩展选项标识这个字段是否是配置需要字段。<strong>illusion.fields_name</strong>字段标识在Sheet中对应的列标题，从Message <strong>LIST_OF_GAME_CFG_STRUCT_2</strong> 里面标识的<strong>illusion.fields_line</strong>行里面的字段查找对应的名称。枚举值可以有枚举值的扩展选项<strong>illusion.enum_name</strong>，用于给枚举值取一个别名，在EXCEL中可以用别名标识对应的值，方便我们进行某些转换。</p><div class="md-section-divider"></div><h3 data-anchor-id="o5qh" id="2使用工具生产excel">2.使用工具生产EXCEL</h3><div class="md-section-divider"></div><h3 data-anchor-id="9xcp" id="填写excel文件">填写EXCEL文件</h3><div class="md-section-divider"></div><h3 data-anchor-id="pyow" id="导出bin文件">导出bin文件</h3><div class="md-section-divider"></div><h2 data-anchor-id="mot1" id="代码说明">代码说明</h2><div class="md-section-divider"></div><h3 data-anchor-id="fqse" id="1代码目录说明">1.代码目录说明</h3><p data-anchor-id="0iil">GitHub上存放有<strong>illusion</strong>的主要源代码代码目录，包括ProtoBuf 2.6的代码，但不包括Qt的代码，所以请自己下载。目前还不包括可执行程序的代码代码目录，等更加稳定一点，估计会开始打包正式版本。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="64n6" style=""><ol class="linenums"><li class="L0"><code><span class="pln">illusion</span></code></li><li class="L1"><code><span class="pln">   </span><span class="pun">|--------&lt;</span><span class="pln">bin</span><span class="pun">&gt;</span><span class="pln">  </span><span class="pun">可执行程序目录</span></code></li><li class="L2"><code><span class="pln">   </span><span class="pun">|--------&lt;</span><span class="pln">lib</span><span class="pun">&gt;</span><span class="pln">  </span><span class="pun">编译的库存放目录</span></code></li><li class="L3"><code><span class="pln">   </span><span class="pun">|--------&lt;</span><span class="pln">example</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">导出的例子目录，有若干个例子，下面说明一个</span></code></li><li class="L4"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">          </span><span class="pun">|---------&lt;</span><span class="lit">001</span><span class="pun">&gt;</span></code></li><li class="L5"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|------&lt;</span><span class="pln">excel</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">例子</span><span class="lit">001</span><span class="pun">的</span><span class="pln">EXCEL</span><span class="pun">文件存放目录</span></code></li><li class="L6"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|------&lt;</span><span class="kwd">import</span><span class="pun">&gt;</span></code></li><li class="L7"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|</span><span class="pln">        </span><span class="pun">|------</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">proto  PB</span><span class="pun">扩展的描述</span><span class="pln">proto</span><span class="pun">文件，</span></code></li><li class="L8"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|</span><span class="pln">        </span><span class="pun">|------&lt;</span><span class="pln">google</span><span class="pun">&gt;</span><span class="pln">  </span></code></li><li class="L9"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|</span><span class="pln">                  </span><span class="pun">|----&lt;</span><span class="pln">protobuf</span><span class="pun">&gt;</span></code></li><li class="L0"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|</span><span class="pln">                              </span><span class="pun">|----</span><span class="pln">descriptor</span><span class="pun">.</span><span class="pln">proto  protobufextend</span><span class="pun">的依赖</span></code></li><li class="L1"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|-------&lt;</span><span class="pln">proto</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">例子</span><span class="lit">001</span><span class="pun">的</span><span class="pln">PB</span><span class="pun">描述文件存放目录</span></code></li><li class="L2"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">                     </span><span class="pun">|-------&lt;</span><span class="pln">outer</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">例子</span><span class="lit">001</span><span class="pun">生产的配置文件</span><span class="pln">bin</span><span class="pun">文件的存放目录</span></code></li><li class="L3"><code><span class="pln">   </span><span class="pun">|--------&lt;</span><span class="pln">depend</span><span class="pun">&gt;</span></code></li><li class="L4"><code><span class="pln">   </span><span class="pun">|</span><span class="pln">         </span><span class="pun">|----------&lt;</span><span class="pln">protobuf</span><span class="pun">-</span><span class="lit">2.6</span><span class="pun">.</span><span class="lit">1</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">外部依赖库</span><span class="pln"> protobuf </span><span class="lit">2.6</span><span class="pun">.</span><span class="lit">1</span><span class="pun">的目录</span></code></li><li class="L5"><code><span class="pln">   </span><span class="pun">|--------</span><span class="pln">src  </span><span class="pun">源代码目录</span></code></li><li class="L6"><code><span class="pln">             </span><span class="pun">|---------&lt;</span><span class="pln">biko</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">读取</span><span class="pln">PB</span><span class="pun">，</span><span class="pln">EXCEL</span><span class="pun">的基础代码目录，基本库，生成</span><span class="kwd">static</span><span class="pln"> lib</span></code></li><li class="L7"><code><span class="pln">             </span><span class="pun">|---------&lt;</span><span class="pln">dreams</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">命令行工具的代码，命令行工具用于编译自动转换等方式</span></code></li><li class="L8"><code><span class="pln">             </span><span class="pun">|---------&lt;</span><span class="kwd">import</span><span class="pun">&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pun">的</span><span class="pln">PB</span><span class="pun">文件</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">proto </span><span class="pun">生成的基础代码，生产库文件</span></code></li><li class="L9"><code><span class="pln">             </span><span class="pun">|---------&lt;</span><span class="pln">vision</span><span class="pun">&gt;</span><span class="pln"> vision</span><span class="pun">为图形化工具的代码目录</span></code></li><li class="L0"><code><span class="pln">             </span><span class="pun">|---------</span><span class="pln">illusion</span><span class="pun">.</span><span class="pln">sln </span><span class="pun">工程文件,</span><span class="typ">Visual</span><span class="pln"> </span><span class="typ">Studio</span><span class="pln"> </span><span class="lit">2015</span><span class="pln"> C</span><span class="pun">++工程</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="vg0m" id="2外部库">2.外部库</h3><p data-anchor-id="7fwq"><strong>illusion</strong>使用了一些外部库提供辅助功能。</p><div class="md-section-divider"></div><h4 data-anchor-id="zc1n" id="protobuf-v2">Protobuf V2</h4><p data-anchor-id="7w7q"><strong>illusion</strong>目前实用Protobuf V2作为，一方面因为目前版本2还是主流。一方面是部分实用我工具的团队目前是用Protobuf V3有问题。所以暂未升级。但支持起来应该没啥困难。</p><div class="md-section-divider"></div><h4 data-anchor-id="kkvz" id="qt5">Qt5</h4><p data-anchor-id="zdle"><strong>illusion</strong>主要实用Qt 完成工具界面的开发，以及相应的读取EXCEL部分的功能。<strong>illusion</strong>目前实用的是Qt5.6版本进行的编译，</p><div class="md-section-divider"></div><h2 data-anchor-id="f2z1" id="感谢">感谢</h2><p data-anchor-id="wiue"><strong>illusion</strong>的设计思路来自yingqiliu，而我自己当时的设计思路，PB文件不使用扩展，是在EXCEL里面配置和Proto的对应关系完成配置，使用PB的反射生产bin配置文件。yingqiliu的方法的优势来自在于策划和程序开发的工作可以分开，程序在编写完成PB后，不需要再折腾EXCEL文件。如何使用PB扩展完成的相应的功能andrewli 给出过一些例子参考。</p></div>

</body></html>